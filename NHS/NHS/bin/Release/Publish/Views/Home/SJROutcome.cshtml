@model NHS.Common.clsSJROutcome
@{
    ViewBag.Title = "SJROutcome";
    Layout = "~/Views/Shared/_Layout.cshtml";
}



<div class="container">
    <div class="row form-group">
        <div class="col-xs-12 col-lg-12">
            <div class="row" align="right">
                <div class="col-md-12">
                    <input type="image" src="~/images/Delete.png" width="30" height="30" alt="Submit" id="btnClose" title="Close" />
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row setup-content" id="step-1">
    @using (Html.BeginForm("SJROutcome", "Home", FormMethod.Post, new { @id = "my_form" }))
    {
        <div class="col-xs-12 col-lg-12">
            <div class="row" align="right">

            </div>
            <div class="col-md-12 well text-center">
                <div class="form-section" style="text-align:left">
                    <div class="lable_title">
                        <h2>SJR OUTCOME</h2>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <div class="row_bar">
                                Stage 2 SJR Required?
                            </div>
                        </div>
                        <div class="col-md-7">
                            <div class="row_bar checkbox-row">
                                @if (Model.Stage2SJRRequired == true)
                                {
                                    <input type="radio" id="Stage2SJRRequired" checked name="Stage2SJRRequired" value="Yes"><span> Yes </span>
                                }
                                else
                                {
                                    <input type="radio" id="Stage2SJRRequired" name="Stage2SJRRequired" value="Yes"><span> Yes </span>
                                }
                                @if (Model.Stage2SJRRequired == false)
                                {
                                    <input type="radio" id="Stage2SJRRequired" checked name="Stage2SJRRequired" value="No"><span> No </span>
                                }
                                else
                                {
                                    <input type="radio" id="Stage2SJRRequired" name="Stage2SJRRequired" value="No"><span> No </span>
                                }
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="row_bar">
                                <span>Stage 2 SJR date sent</span>
                            </div>
                        </div>
                        <div class="col-md-7">
                            <div class="row_bar">
                                <input class="form-control input_datepicker" type="text" id="Stage2SJRDateSent" value="@Model.Stage2SJRDateSent"  name="Stage2SJRDateSent" placeholder="Select Date">
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="row_bar">
                                <span>Stage 2 SJR sent to</span>
                            </div>
                        </div>

                        <div class="col-md-7">
                            <div class="row_bar">
                                @Html.EditorFor(model => model.Stage2SJRSentTo, new { htmlAttributes = new { @class = "form-control" } })
                            </div>
                        </div>
                    </div>
                    <div class="lable_title">
                        <h2>SIRI/ RCA OUTCOME</h2>
                    </div><br />
                    <div class="row">
                        <div class="col-md-5">
                            <span>Reference Number</span>
                        </div>

                        <div class="col-md-7">
                            @Html.EditorFor(model => model.ReferenceNumber, new { htmlAttributes = new { @class = "form-control" } })
                        </div>
                        <div class="col-md-5">
                            <span>Date Received</span>
                        </div>

                        <div class="col-md-7">
                            <input class="form-control input_datepicker" type="text" id="DateReceived" value="@Model.DateReceived" name="DateReceived" placeholder="Select Date">
                        </div>
                        <div class="col-md-12">
                            <span>Comments</span>
                        </div>
                        <div class="col-md-12">
                            @Html.TextAreaFor(model => model.SIRIComments, 5, 100, new { @class = "form-control" })
                        </div>
                    </div><br />
                    <div class="lable_title">
                        <h2>MORTALITY SURVEILLANCE GROUP </h2>
                    </div>
                    <div class="row">
                        <div class="col-md-5">
                            <span>Presentation to MSG required? </span>
                        </div>
                        <div class="col-md-7">
                            <div class="row_bar checkbox-row">
                                @if (Model.MSGRequired == true)
                                {
                                    <input type="radio" id="MSGRequired" checked name="MSGRequired" value="Yes"><span> Yes </span>
                                }
                                else
                                {
                                    <input type="radio" id="MSGRequired" name="MSGRequired" value="Yes"><span> Yes </span>
                                }
                                @if (Model.MSGRequired == false)
                                {
                                    <input type="radio" id="NoRequired" checked name="NoRequired" value="No"><span> No </span>
                                }
                                else
                                {
                                    <input type="radio" id="NoRequired" name="NoRequired" value="No"><span> No </span>
                                }
                            </div>
                        </div>
                        <div class="col-md-5">
                            <span>Discussed with MSG</span>
                        </div>

                        <div class="col-md-7">
                            <input class="form-control input_datepicker" type="text" id="MSGDiscussionDate" name="MSGDiscussionDate" value="@Model.MSGDiscussionDate"  placeholder="Select Date" value="@Model.MSGDiscussionDate">
                        </div>
                        <div class="col-md-5">
                            <div class="row_bar">
                                <label class="label_part">Avoidability Score</label>
                            </div>
                        </div>
                        <div class="col-md-7">
                            <div class="row_bar">
                                <select class="form-control" id="AvoidabilityScoreID" name="AvoidabilityScoreID">
                                    <option value="0">--Select--</option>
                                    @if (Model.AvoidabilityScoreID == 1)
                                    {
                                        <option selected value="1">1</option>
                                    }
                                    else
                                    {
                                        <option value="1">1</option>
                                    }
                                    @if (Model.AvoidabilityScoreID == 2)
                                    {
                                        <option selected value="2">2</option>
                                    }
                                    else
                                    {
                                        <option value="2">2</option>
                                    }
                                    @if (Model.AvoidabilityScoreID == 3)
                                    {
                                        <option selected value="3">3</option>
                                    }
                                    else
                                    {
                                        <option value="3">3</option>
                                    }
                                </select>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <span>Comments</span>
                        </div>
                        <div class="col-md-12">
                            @Html.TextAreaFor(model => model.Comments, 5, 100, new { @class = "form-control" })
                        </div>
                        <div class="col-md-12">
                            <span>Feedback to NoK</span>
                        </div>
                        <div class="col-md-12">
                            @Html.TextAreaFor(model => model.FeedbackToNoK, 5, 100, new { @class = "form-control" })
                        </div>
                    </div>
                    <input type="hidden" id="hdfStage2SJRRequired" name="hdfStage2SJRRequired" value="" />
                    <input type="hidden" id="hdfMSGRequired" name="hdfMSGRequired" value="" />
                </div>
            </div>
        </div>
        <div class="pull-right">
            <button id="activate-step-2" type="submit" name="BtnFinish" class="btn btn-primary btn-lg">Save & Finish</button>
        </div>
    }
</div>
<br />
<br />

<div class="modal fade" id="modelClose">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Messsage</h4>
                <button type="button" class="close" data-dismiss="modal">×</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
                <div class="form-section" style="text-align:left">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row_bar">
                                <div>Do you want to Save Record?</div>
                            </div>
                        </div>
                        <br />
                        <br />

                        <div class="col-md-4">
                            <button type="button" class="btn btn-primary btn-block" id="btnCloseYes">Yes</button>
                        </div>
                        <div class="col-md-4">
                            <button type="button" class="btn btn-primary btn-block" id="btnModelClose" data-dismiss="modal">NO</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $("#btnClose").click(function () {
            $("#modelClose").modal();
        });
    });
</script>

<script type="text/javascript">
$(function () {
    $("#btnModelClose").click(function(){
window.location.href = "@Url.Action("MortalityReview", "Home")";
    });
});
</script>
<script type="text/javascript">
    $(document).ready(function () {
        $('input:radio').change(function () {
            var radioVal = $("input[name=Stage2SJRRequired]:checked").val();
            $('#hdfStage2SJRRequired').val(radioVal);
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function () {
        $('input:radio').change(function () {
            var radioVal = $("input[name=MSGRequired]:checked").val();
            $('#hdfMSGRequired').val(radioVal);
        });
    });
</script>
